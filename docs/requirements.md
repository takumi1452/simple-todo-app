# 要件定義書：simple-todo-app

# 目次
- [要件定義書：simple-todo-app](#要件定義書simple-todo-app)
- [目次](#目次)
  - [0. 改訂履歴](#0-改訂履歴)
  - [1. 概要](#1-概要)
    - [1.1 背景](#11-背景)
    - [1.2 目的（ゴール）](#12-目的ゴール)
    - [1.3 対象ユーザー / 利用シーン](#13-対象ユーザー--利用シーン)
    - [1.4 スコープ](#14-スコープ)
  - [2. 用語・前提](#2-用語前提)
  - [3. システム構成](#3-システム構成)
    - [3.1 使用技術](#31-使用技術)
    - [3.2 動作環境](#32-動作環境)
    - [3.3 データ保存・連携](#33-データ保存連携)
  - [4. 画面・UI要件](#4-画面ui要件)
    - [4.1 画面一覧](#41-画面一覧)
    - [4.2 画面詳細](#42-画面詳細)
  - [5. 機能要件](#5-機能要件)
    - [5.1 機能一覧（MUST / SHOULD / COULD）](#51-機能一覧must--should--could)
    - [5.2 機能詳細](#52-機能詳細)
      - [5.2.1 ToDo追加（ボタン / Enter共通）](#521-todo追加ボタン--enter共通)
      - [5.2.2 ToDo一覧表示（再描画）](#522-todo一覧表示再描画)
      - [5.2.3 完了 / 未完了切替（チェックボックス）](#523-完了--未完了切替チェックボックス)
      - [5.2.4 ToDo削除](#524-todo削除)
      - [5.2.5 起動時の復元（localStorage）](#525-起動時の復元localstorage)
    - [5.3 データ要件](#53-データ要件)
      - [5.3.1 データ構造](#531-データ構造)
      - [5.3.2 保存仕様（localStorage）](#532-保存仕様localstorage)
      - [5.3.3 識別方法（現状）](#533-識別方法現状)
  - [6. 非機能要件](#6-非機能要件)
  - [7. 制約・リスク](#7-制約リスク)
  - [8. 受け入れ基準（完了条件）](#8-受け入れ基準完了条件)
  - [9. 今後の拡張（バックログ）](#9-今後の拡張バックログ)
  - [10. 参考資料](#10-参考資料)

---

## 0. 改訂履歴
| 日付 | 版 | 変更概要 | 変更者 |
|---|---|---|---|
| 2026-02-10 | 0.1 | 初版 | 久瀬 匠 |

---

## 1. 概要
### 1.1 背景
- HTML / CSS / JavaScriptを学ぶ上で、アプリの開発をAIにサポートしてもらいながら作ることで理解を深めたいと考えた。
- 書籍や動画等を用いたプログラミング学習では、飽きを感じるたため、このような開発をしながら学ぶ方法を選んだ。
- 設計・実装・改善の一連の流れを経験するため。

### 1.2 目的（ゴール）
- PCのGoogle Chrome上で動作する、シンプルなToDoアプリを作成する。
- JavaScriptによるDOM操作、イベント処理、情報管理を理解する。
- CSSによる基本的なレイアウト・UI調整を経験する。

### 1.3 対象ユーザー / 利用シーン
- 対象ユーザー
  - 自分
- 利用シーン
  - PCを使っている際に、簡単なToDoをメモする際に。

### 1.4 スコープ
- 今回作る範囲（MVP）
  - ToDoの追加・削除
  - 完了 / 未完了の切り替え
  - Enterキーによる追加
  - ブラウザ再読み込み後も状態を保持
- 今回はやらない範囲（明確に）
  - ユーザー管理・ログイン機能
  - スマートフォン対応
  - サーバーやデータベースの使用
  - 高度なデザイン調整

---

## 2. 用語・前提
- 用語定義
  - ToDo：実行すべき作業内容を表す1件のデータ
  - 完了：作業が終わった状態
  - 未完了：作業が終わっていない状態
- 前提条件
  - インターネット接続は不要
  - PCのGoogle Chromeブラウザで利用する
  - データはブラウザのlocalStorageに保存される

---

## 3. システム構成
### 3.1 使用技術
- HTML / CSS / JavaScript（フレームワーク不使用）
- 開発環境：VSCode
- バージョン管理：Git / GitHub

### 3.2 動作環境
- 対応端末：PC
- 対応OS：Windows
- 対応ブラウザ：Google Chrome（最新版想定）

### 3.3 データ保存・連携
- 保存先：localStorage
- 保存内容：ToDoの配列データ
- 保存タイミング：追加・削除・完了状態のたびに保存
- 外部APIの有無：無

---

## 4. 画面・UI要件
### 4.1 画面一覧
| 画面ID | 画面名 | 概要 |
|---|---|---|
| MAIN | メイン画面 | ToDoの入力・一覧表示を行う |

### 4.2 画面詳細
- メイン画面
  - タイトル表示
  - 入力欄（テキスト）
  - 追加ボタン 
  - ToDo一覧
  - 各ToDoにチェックボックスと削除ボタンを表示
  - 削除ボタンの表示文言は「削除」
  - 完了状態はテキストに打ち消し線（.completed）で表現する

---

## 5. 機能要件
### 5.1 機能一覧（MUST / SHOULD / COULD）
- MUST
  - ToDoを入力して追加できる
  - Enterキーでも追加できる
  - ToDoを削除できる
  - 完了 / 未完了を切り替えられる
  - ブラウザを更新しても内容が保持される
- SHOULD
- COULD（将来）
  - 編集機能
  - フィルタ（完了 / 未完了）
  - 並び替え

### 5.2 機能詳細
#### 5.2.1 ToDo追加（ボタン / Enter共通）
- 概要：入力欄の文字列からToDoを1件追加し、一覧を更新して保存する。
- 入力
  - 入力欄text-inputに文字列を入力
  - 追加操作：
    - 「追加」ボタンadd-btnのクリック
    - 入力欄でEnterキー押下（keyup）
- 制約
   - 入力欄はmaxlength=30により最大30文字。
- 処理
  1. 入力値を取得し、前後の空白をtrim()で除去する。
  2. 文字列が空の場合は何もしない（追加しない）。
  3. todos配列の末尾に以下のデータを追加する。
     - text：入力文字列
     - completed：false
  4. saveTodos()を実行し、localStorageに保存する。
  5. renderTodos()を実行し、一覧を再描画する。
  6. 入力欄を空にし、入力欄へフォーカスを戻す。
- 出力
  - 一覧に新しいToDoが表示される。
  - 再読み込み後も追加したToDoが残る。
- 例外・バリデーション
  - 空文字（または空白のみ）は追加されない。
- 受け入れ条件（完了条件）
  - ボタンでもEnterでも追加でき、同じ結果になる。
  - 追加後に入力欄が空になり、フォーカスが戻る。

#### 5.2.2 ToDo一覧表示（再描画）
- 概要：todos配列の内容をUIに反映して一覧表示する。
- 入力
  - renderTodos()呼び出し（追加・削除・完了切替・復元時）
- 処理
  1. 表示領域todo-areaをinnerHTMLで初期化する。
  2. todosを先頭から走査し、各Todoに対応するDOMを生成する。
  3. 各Todo行（.todo-item）にはdata-indexとして配列indexを設定する。
  4. completed=trueの場合、チェックボックスをONにし、テキストに.completedクラスを付与する。
- 出力
  - todosの順番通りにToDoが表示される。
- 受け入れ条件（完了条件）
  - 保存データと同じ件数・順序・完了状態で表示される。

#### 5.2.3 完了 / 未完了切替（チェックボックス）
- 概要：チェックボックス操作で完了状態を切替、保存・再描画する。
- 入力
  - ToDo行のチェックボックス（input[type="checkbox"]）をクリック
- 処理
  1. クリックされた要素から親の.todo-itemを取得する。
  2. .todo-itemのdata-indexを数値として取得する。
  3. todos[index].completedにチェック状態（event.target.checked）を代入する。
  4. saveTodos() → renderTodos()を実行する。
- 出力
  - 完了状態が見た目で分かる（.completedの打ち消し線）。
  - 再読み込み後も完了状態が保持される。
- 例外・バリデーション
  - data-indexが不正な場合は動作不能になる可能性がある（現状仕様では例外処理なし）。
- 受け入れ条件（完了条件）
  - チェックON/OFFが見た目で切り替わり、再読み込み後も保持される。

#### 5.2.4 ToDo削除
- 概要：指定したToDoを削除し、保存・再描画する。
- 入力
  - ToDo行の削除ボタン（.delete-btn）クリック
- 処理
  1. クリックされた要素から親の.todo-itemを取得する。
  2. .todo-itemのdata-indexを数値として取得する。
  3. todos.splice(index, 1)で対象ToDoを削除する。
  4. saveTodos() → renderTodos()を実行する。
- 出力
  - 対象ToDoが一覧から消える。
  - 再読み込み後も復活しない。
- 受け入れ条件（完了条件）
  - 押した行のToDoが削除され、保存にも反映される。

#### 5.2.5 起動時の復元（localStorage）
- 概要：起動時にlocalStorageからtodos配列を読み込み、一覧表示する。
- 入力
  - ページ読み込み時に自動実行
- 処理
  1. localStorage.getItem("todos")を取得する。
  2. 取得値が存在し、"undefined"でない場合のみ読み込み処理を行う。
  3. JSON.parseに成功したらtodosに代入し、renderTodos()を実行する。
  4. JSON.parseに失敗した場合は以下を行う：
     - todos = []にリセット
     - localStorage.removeItem("todos")
- 出力
  - 前回保存したToDo一覧が表示される。
- 受け入れ条件（完了条件）
  - 再読み込みでToDoと完了状態が復元される。
  - 壊れたデータでもアプリが落ちず、空状態で起動できる。

### 5.3 データ要件
#### 5.3.1 データ構造
- ToDo一覧：todos（配列）
- ToDo1件の形式（オブジェクト）
  - text：string（必須、最大30文字、前後空白は保存前に除去）
  - completed：boolean（必須、初期値はfalse）

#### 5.3.2 保存仕様（localStorage）
- 保存先：localStorage
- キー名："todos"
- 形式：JSON.stringify(todos)（JSON文字列）
- 保存タイミング：
  - 追加
  - 削除
  - 完了/未完了切替

#### 5.3.3 識別方法（現状）
- ToDoの識別はdata-index（配列index）で行う。
- 注意：削除によりindexが変化するため、将来拡張（編集/並び替え）ではid導入が望ましい（バックログの通り）。
---

## 6. 非機能要件
- 性能
- 可用性
  - ブラウザを閉じてもToDoが消えないこと
- 保守性
  - JavaScriptの処理は役割ごとに関数を分ける
  - CSSは役割ごとに処理する 

---

## 7. 制約・リスク

---

## 8. 受け入れ基準（完了条件）
以下を全て満たした場合、本アプリは「完成」とする。
- 空文字列ではToDoが追加されない。
- EnterキーでToDoを追加できる。
- チェックを入れると完了状態が視覚的に分かる。
- 削除ボタンでToDoを削除できる。
- ページを再読み込みしてもToDoが保持される。

---

## 9. 今後の拡張（バックログ）
- ToDo編集機能
- 完了 / 未完了のフィルタ表示
- 並び順の制御
- ID管理によるデータ構造改善
- エクスポート / インポート機能
---

## 10. 参考資料

